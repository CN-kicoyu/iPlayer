webpackJsonp([3],{"+gpK":function(t,i){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABDklEQVQ4T62TMU7DQBBF58tyjY+QI6RGFL6BZ2/AEXKE0FCHG4QDWPOPEE5ACmpA1EikdzFokNcykoGVyEqrlXZnnmb+n4X8cyHyVXUvIq8lLABrM9McmwFbktsSgKp+iz0vQFVXItIAuFiqxswefq1AVVsRCUjspbUTkc283fO2UCjiiuTk2LyCm67rrgBUAaqq6q3v++fR5nDoqy0Ajbs/isgdydMEqOv6dhiGy8lf4N3MnkK0SCZ5nd9UNbQ4hRZ/apBSOphZG6e7H0XkQJL5vhgQ0xpVpJQYk5jPEkBOyBUcSe6LAaMGDcnNTIP4C+u5BvGZXhZsvA+xYngAtO7+AQCjFrvJhRL/f4r5BGh4uBFUPdRYAAAAAElFTkSuQmCC"},R0Bt:function(t,i){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABBklEQVQ4T6WTUVEDQRBEpxUQCUEBQQHBQY8CggOiAFBAJMTBtAPiIEgICoiDoebqckWFuxTH7c/ux+7r7t1e2MSBiedtEEByZmbPktaXRHoBJBdmFgDmEdHtIUkAkZm3kj4K/AtA8gnA20n1DDADcMjML0nXHcDdi3bTZ7UApVxxzOzezJati7WkTePA3XMoZwtYANhn5qukF3c/mtkuIvgnQCuyqzkilu7erccAKubxXwCSlfs9M5vcFSEzJWnVOCC5BfBw6RIBrCrz6ZUy81HStu8ZS01mdtVm/tmDuZntAXxGRHWlv4nVwhZyd9aDgm8yk5IOg4BTFJKrsjm6ymM+2OTf+A27r5AReiThhAAAAABJRU5ErkJggg=="},b9oG:function(t,i){},cZA4:function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var s=e("VCXJ"),n=e("I5Ld"),r={name:"Scroll",data:function(){return{msg:"Welcome to Your Vue.js App"}},props:{probeType:{type:Number,default:1},click:{type:Boolean,default:!0},listenScroll:{type:Boolean,default:!1},data:{type:Array,default:null}},mounted:function(){var t=this;setTimeout(function(){t.__initScroll()},200)},methods:{__initScroll:function(){if(this.scroll=new n.a(this.$refs.wrapper,{probeType:this.probeType,click:this.click}),this.listenScroll){var t=this;this.scroll.on("scroll",function(i){t.$emit("scroll",i)})}},disable:function(){this.scroll&&this.scroll.disable()},enable:function(){this.scroll&&this.scroll.enable()},refresh:function(){this.scroll&&this.scroll.refresh()},scrollTo:function(){console.log("qqqq"),this.scroll&&this.scroll.scrollTo.apply(this.scroll,arguments)},scrollToElement:function(){this.scroll&&this.scroll.scrollToElement.apply(this.scroll,arguments)}},watch:{data:function(){var t=this;setTimeout(function(){t.refresh()},200)}}},o={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{ref:"wrapper"},[this._t("default")],2)},staticRenderFns:[]};var a=e("Z0/y")(r,o,!1,function(t){e("b9oG")},"data-v-4384159e",null).exports,c={data:function(){return{touch:{}}},props:{percent:{type:Number,default:0},isVolume:{type:Boolean,default:!1}},watch:{percent:function(t){t>=0&&!this.touch.initState&&!this.isVolume&&this.setPos(t)}},mounted:function(){this.isVolume&&(this.$refs.dot.style.transform="translate3d("+(this.$refs.has.clientWidth-16)+"px, 0, 0)")},methods:{onStart:function(t){"dot"==t.target.className&&(this.touch.initState=!0,this.touch.startX=t.pageX,this.touch.left=this.$refs.has.clientWidth)},onMove:function(t){if(this.touch.initState){var i=this.$refs.bar.clientWidth-16,e=t.pageX-this.touch.startX,s=Math.min(i,Math.max(0,this.touch.left+e))/i;this.setPos(s)}},onEnd:function(){this.touch.initState=!1,this.emitHandle()},onClickChange:function(t){var i=this.$refs.bar.clientWidth-16,e=this.$refs.bar.getBoundingClientRect(),s=(t.pageX-e.left-16)/i;this.setPos(s),this.emitHandle()},setPos:function(t){var i=Math.max(0,Math.min(parseFloat(t),1));this.$refs.has.style.width=100*i+"%",this.$refs.dot.style.transform="translate3d("+Math.max(0,i*this.$refs.bar.clientWidth-this.$refs.dot.clientWidth)+"px, 0, 0)"},emitHandle:function(){var t=this.$refs.bar.clientWidth-16,i=this.$refs.has.clientWidth/t;this.isVolume?(i=parseFloat(Math.max(0,Math.min(i,1))).toFixed(1),this.$emit("volumePercentChange",i)):this.$emit("timePercentChange",i)}}},l={render:function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{ref:"bar",staticClass:"bar",class:{volume:t.isVolume},on:{click:t.onClickChange,mousedown:function(i){i.preventDefault(),t.onStart(i)},mousemove:function(i){i.preventDefault(),t.onMove(i)},mouseup:function(i){i.preventDefault(),t.onEnd(i)}}},[e("p",{ref:"has",staticClass:"has"}),t._v(" "),e("p",{ref:"dot",staticClass:"dot"})])},staticRenderFns:[]};var u=e("Z0/y")(c,l,!1,function(t){e("gsFu")},"data-v-cb8e1a5e",null).exports,h=e("AA3o"),d=e.n(h),f=e("xSur"),m=e.n(f),p=/\[(\d{2,}):(\d{2})(?:\.(\d{2,3}))?\]/g,y=/(^\s*|\s*$)/m,g={title:"ti",artist:"ar",album:"al",offset:"offset",by:"by"},v=function(){function t(i,e){d()(this,t),this.lrc=i.replace(y,""),this.cbHandler=e||function(){},this.info={},this.lrcRow=[],this.state=0,this.__init__()}return m()(t,[{key:"__init__",value:function(){for(var t in g){var i=this.lrc.match(new RegExp("\\["+g[t]+":([^\\]]*)]","i"));this.info[t]=i&&i[1]||""}for(var e=this.lrc.split("\n"),s=0;s<e.length;s++){var n=p.exec(e[s]);if(n){var r=e[s].replace(p,"").replace(y,"");r&&this.lrcRow.push({time:60*n[1]*1e3+1e3*n[2]+10*(n[3]||0),text:r})}}this.lrcRow.sort(function(t,i){return t.time-i.time})}},{key:"play",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments[1];this.lrcRow.length&&(this.state=1,this._stamp=Date.now()-t,this.currentNum=this.__currentLrcRow(t),i||this.currentNum&&this.__linkCbHandler(this.currentNum-1),this.currentNum<this.lrcRow.length&&(clearTimeout(this._timer),this.__playRest()))}},{key:"toggle",value:function(){var t=Date.now();1===this.state?(this.stop(),this._pauseStamp=t):(this.state=1,this.play((this._pauseStamp||t)-(this._stamp||t),!0),this._pauseStamp=0)}},{key:"stop",value:function(){this.state=0,clearTimeout(this._timer)}},{key:"linkTo",value:function(t){this.play(t)}},{key:"__currentLrcRow",value:function(t){for(var i=0;i<this.lrcRow.length&&!(t<=this.lrcRow[i].time);i++);return i}},{key:"__linkCbHandler",value:function(t){t<0||this.cbHandler({text:this.lrcRow[t].text,rowNum:t})}},{key:"__playRest",value:function(){var t=this,i=this.lrcRow[this.currentNum].time-(Date.now()-this._stamp);this._timer=setTimeout(function(){t.__linkCbHandler(t.currentNum++),t.currentNum<t.lrcRow.length&&1===t.state&&t.__playRest()},i)}}]),t}(),A={name:"Audios",data:function(){return{songReady:!1,currentTime:0,currentIndex:global.audioCurrentIndex,currentSong:global.audioList[global.audioCurrentIndex],playlist:global.audioNormalList,playing:global.playing,mode:global.audioMode,totalTime:0,isNotice:!1,notice:"",currentLyric:null,lyricText:"",currentRowNum:0}},filters:{timeFilter:function(t){for(var i=(t|=0)/60|0,e=t%60,s=i.toString().length,n=e.toString().length;s<2;)i="0"+i,s++;for(;n<2;)e="0"+e,n++;return i+":"+e}},mounted:function(){this.playing=!0,this.$refs.audio.play(),this.onGetLyric()},computed:{isRotate:function(){return this.playing?"play":"play pause"},isMode:function(){return 0===this.mode?"mode":1===this.mode?"mode loop":"mode random"},isDisabled:function(){return this.songReady?"":"disabled"},percent:function(){return this.currentTime/this.totalTime}},methods:{readyPlay:function(){this.totalTime=parseInt(this.$refs.audio.duration),this.songReady=!0},error:function(){this.songReady=!0},onUpdataTime:function(t){this.currentTime=parseInt(t.target.currentTime)},onEnd:function(){1===this.mode?this.onLoop():this.onSwitchSong("r")},onSwitchPlay:function(){this.songReady&&(this.playing=global.playing=!this.playing,this.currentLyric&&this.currentLyric.toggle())},onSwitchSong:function(t){if(this.songReady)if(1!==this.playlist.length){var i=void 0;"l"==t?-1==(i=this.currentIndex-1)&&(i=this.playlist.length-1):(i=this.currentIndex+1)==this.playlist.length&&(i=0),this.currentIndex=global.audioCurrentIndex=i,this.playing||this.onSwitchPlay(),this.songReady=!1}else this.onLoop()},onLoop:function(){this.$refs.audio.currentTime=0,this.$refs.audio.play(),this.playing=global.playing=!0,this.currentLyric&&this.currentLyric.linkTo(0)},onTimePercentChange:function(t){this.$refs.audio.currentTime=this.totalTime*t,this.playing||this.onSwitchPlay(),this.currentLyric&&this.currentLyric.linkTo(this.totalTime*t*1e3)},onModeChange:function(){var t=this,i=(this.mode+1)%3;this.mode=global.audioMode=i,this.isNotice=!0,e&&clearTimeout;var e=setTimeout(function(){t.isNotice=!1},1e3);this.notice=0===this.mode?"顺序播放":1===this.mode?"循环播放":"随机播放";var s=this.currentSong.title;this.playlist=2===i?global.audioRandomList=this.shuffle(global.audioNormalList):global.audioNormalList,this.playlist.forEach(function(i,e){i.title==s&&(t.currentIndex=global.audioCurrentIndex=e)})},shuffle:function(t){var i=[];t.forEach(function(t){i.push(t)});for(var e=i.slice(),s=0;s<e.length;s++){var n=Math.floor(Math.random()*(s-0+1)+0),r=e[s];e[s]=e[n],e[n]=r}return e},onVolumePercentChange:function(t){this.$refs.audio.volume=t},onGetLyric:function(){this.currentLyric=new v(this.currentSong.lyric,this.linkLrcHandler),this.playing&&this.currentLyric.play()},linkLrcHandler:function(t){var i=t.text,e=t.rowNum;if(console.log(e),this.currentRowNum=e,e>5){var s=this.$refs.lyricRow[e-5];this.$refs.lyricList.scrollToElement(s,1e3)}else this.$refs.lyricList.scrollTo(0,0,1e3);this.lyricText=i}},components:{Scroll:a,ProgressBar:u},watch:{playing:function(t){var i=this.$refs.audio;this.$nextTick(function(){t?i.play():i.pause()})},currentIndex:function(t){this.currentSong=2==this.mode?global.audioRandomList[t]:global.audioNormalList[t]},currentSong:function(t,i){var e=this;t.title!==i.title&&(this.currentLyric&&(this.currentLyric.stop(),this.currentTime=0,this.lyricText="",this.currentRowNum=0),clearTimeout(this.timer),this.timer=setTimeout(function(){e.$nextTick(function(){e.$refs.audio.play(),e.onGetLyric()})},200))}}},_={render:function(){var t=this,i=t.$createElement,s=t._self._c||i;return s("div",{staticClass:"wrap"},[s("p",{staticClass:"bg"},[s("img",{attrs:{width:"100%",height:"100%",src:"static/mp3/"+t.currentSong.posterName}})]),t._v(" "),s("div",{staticClass:"music"},[s("div",{staticClass:"record"},[s("p",{class:t.isRotate},[s("img",{attrs:{src:"static/mp3/"+t.currentSong.posterName}})])]),t._v(" "),s("div",{staticClass:"lyric"},[s("div",{staticClass:"title"},[s("h1",[t._v(t._s(t.currentSong.title))]),t._v(" "),s("p",[t._v("歌手："),s("span",{staticClass:"blue"},[t._v(t._s(t.currentSong.singer))])])]),t._v(" "),s("scroll",{ref:"lyricList",staticClass:"lyric-wrap",attrs:{data:t.currentLyric&&t.currentLyric.lrcRow}},[s("div",{staticClass:"lyric-content"},[t.currentLyric?s("div",t._l(t.currentLyric.lrcRow,function(i,e){return s("p",{ref:"lyricRow",refInFor:!0,class:{active:t.currentRowNum===e,lrc:!0}},[t._v(t._s(i.text))])})):t._e()])])],1)]),t._v(" "),s("div",{staticClass:"control"},[s("p",{staticClass:"btn"},[s("i",{staticClass:"l",class:t.isDisabled,on:{click:function(i){t.onSwitchSong("l")}}}),t._v(" "),s("i",{class:{m:!0,p:!t.playing,disabled:!t.songReady},on:{click:t.onSwitchPlay}}),t._v(" "),s("i",{staticClass:"r",class:t.isDisabled,on:{click:function(i){t.onSwitchSong("r")}}})]),t._v(" "),s("div",{staticClass:"progress"},[s("span",[t._v(" "+t._s(t._f("timeFilter")(t.currentTime))+" ")]),t._v(" "),s("div",{staticClass:"bar-wrap"},[s("progress-bar",{attrs:{percent:t.percent},on:{timePercentChange:t.onTimePercentChange}})],1),t._v(" "),s("span",[t._v(" "+t._s(t._f("timeFilter")(t.totalTime))+" ")])]),t._v(" "),s("div",{staticClass:"progress volume"},[s("img",{attrs:{src:e("R0Bt"),width:"16",height:"16"}}),t._v(" "),s("div",{staticClass:"bar-wrap"},[s("progress-bar",{attrs:{percent:30,isVolume:!0},on:{volumePercentChange:t.onVolumePercentChange}})],1)]),t._v(" "),s("p",{staticClass:"btn icon"},[t.isNotice?s("span",{staticClass:"notice"},[t._v(t._s(t.notice))]):t._e(),t._v(" "),s("i",{class:t.isMode,on:{click:t.onModeChange}}),t._v(" "),t._m(0)])]),t._v(" "),s("audio",{ref:"audio",attrs:{src:"static/mp3/"+t.currentSong.audioName},on:{canplay:t.readyPlay,error:t.error,timeupdate:t.onUpdataTime,ended:t.onEnd}})])},staticRenderFns:[function(){var t=this.$createElement,i=this._self._c||t;return i("span",{staticClass:"item"},[i("img",{attrs:{src:e("+gpK"),width:"16",height:"16"}}),i("i",[this._v("7")])])}]};var C=e("Z0/y")(A,_,!1,function(t){e("hTCB")},null,null).exports;s.a.config.productionTip=!1,new s.a({el:"#app",components:{Audios:C},template:"<Audios/>"})},gsFu:function(t,i){},hTCB:function(t,i){}},["cZA4"]);